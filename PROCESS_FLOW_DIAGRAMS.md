# ğŸ¯ DeFi Trading Platform - Process Flow Diagrams

## ğŸ¢ 1. Company Registration Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Company       â”‚    â”‚   Input         â”‚    â”‚   Validation    â”‚
â”‚   Authority     â”‚â”€â”€â”€â–¶â”‚   â€¢ Name        â”‚â”€â”€â”€â–¶â”‚   â€¢ Name â‰¤ 64   â”‚
â”‚   (Signer)      â”‚    â”‚   â€¢ Symbol      â”‚    â”‚   â€¢ Symbol â‰¤ 16 â”‚
â”‚                 â”‚    â”‚   â€¢ Description â”‚    â”‚   â€¢ Desc â‰¤ 256  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                        â”‚
                                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Company       â”‚    â”‚   SPL Token     â”‚    â”‚   Platform      â”‚
â”‚   Account       â”‚â—€â”€â”€â”€â”‚   Mint          â”‚â—€â”€â”€â”€â”‚   State         â”‚
â”‚   Created       â”‚    â”‚   Created       â”‚    â”‚   Updated       â”‚
â”‚   (PDA)         â”‚    â”‚   (Company=Auth)â”‚    â”‚   (companies++)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Result:**
- âœ… Company registered with unique ID
- âœ… SPL token mint created for shares
- âœ… Platform tracks total companies
- â³ Company awaits admin verification

---

## ğŸ’° 2. Initial Token Offering (ITO) Flow

### Phase 1: Offering Creation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Company       â”‚    â”‚   Offering      â”‚    â”‚   Token         â”‚
â”‚   Authority     â”‚â”€â”€â”€â–¶â”‚   Parameters    â”‚â”€â”€â”€â–¶â”‚   Minting       â”‚
â”‚   (Signer)      â”‚    â”‚   â€¢ Supply      â”‚    â”‚   â€¢ Mint to     â”‚
â”‚                 â”‚    â”‚   â€¢ Price       â”‚    â”‚     Escrow      â”‚
â”‚                 â”‚    â”‚   â€¢ Start/End   â”‚    â”‚   â€¢ Update      â”‚
â”‚                 â”‚    â”‚     Times       â”‚    â”‚     Supply      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                        â”‚
                                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Offering      â”‚    â”‚   Escrow        â”‚    â”‚   Platform      â”‚
â”‚   Account       â”‚â—€â”€â”€â”€â”‚   Token         â”‚â—€â”€â”€â”€â”‚   State         â”‚
â”‚   Created       â”‚    â”‚   Account       â”‚    â”‚   Updated       â”‚
â”‚   (Status:      â”‚    â”‚   (Holds tokens)â”‚    â”‚   (offerings++) â”‚
â”‚    Pending)     â”‚    â”‚                 â”‚    â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Phase 2: User Participation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User          â”‚    â”‚   Payment       â”‚    â”‚   Token         â”‚
â”‚   (Wants to     â”‚â”€â”€â”€â–¶â”‚   Processing    â”‚â”€â”€â”€â–¶â”‚   Transfer      â”‚
â”‚    buy tokens)  â”‚    â”‚   â€¢ SOL to      â”‚    â”‚   â€¢ Tokens to   â”‚
â”‚                 â”‚    â”‚     Offering    â”‚    â”‚     User        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                        â”‚
                                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User          â”‚    â”‚   Offering      â”‚    â”‚   Portfolio     â”‚
â”‚   Token         â”‚â—€â”€â”€â”€â”‚   Updated       â”‚â—€â”€â”€â”€â”‚   Updated       â”‚
â”‚   Account       â”‚    â”‚   â€¢ Supply--    â”‚    â”‚   â€¢ Balance++   â”‚
â”‚   (Has tokens)  â”‚    â”‚   â€¢ Raised++    â”‚    â”‚   â€¢ Invested++  â”‚
â”‚                 â”‚    â”‚   â€¢ Participants++   â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ˆ 3. Trading System Flow

### Phase 1: Order Placement

#### Sell Order Creation
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Token Holder  â”‚    â”‚   Token         â”‚    â”‚   Sell Order    â”‚
â”‚   (Wants to     â”‚â”€â”€â”€â–¶â”‚   Escrow        â”‚â”€â”€â”€â–¶â”‚   Account       â”‚
â”‚    sell)        â”‚    â”‚   â€¢ Tokens      â”‚    â”‚   â€¢ Created     â”‚
â”‚                 â”‚    â”‚     locked      â”‚    â”‚   â€¢ Status:     â”‚
â”‚                 â”‚    â”‚   â€¢ Userâ†’Escrow â”‚    â”‚     Active      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Buy Order Creation
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SOL Holder    â”‚    â”‚   Payment       â”‚    â”‚   Buy Order     â”‚
â”‚   (Wants to     â”‚â”€â”€â”€â–¶â”‚   Escrow        â”‚â”€â”€â”€â–¶â”‚   Account       â”‚
â”‚    buy)         â”‚    â”‚   â€¢ SOL         â”‚    â”‚   â€¢ Created     â”‚
â”‚                 â”‚    â”‚     locked      â”‚    â”‚   â€¢ Status:     â”‚
â”‚                 â”‚    â”‚   â€¢ Userâ†’Escrow â”‚    â”‚     Active      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Phase 2: Order Matching & Execution

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Sell Order    â”‚    â”‚   Order         â”‚    â”‚   Buy Order     â”‚
â”‚   â€¢ Price: X    â”‚â”€â”€â”€â–¶â”‚   Matching      â”‚â—€â”€â”€â”€â”‚   â€¢ Price: Y    â”‚
â”‚   â€¢ Amount: A   â”‚    â”‚   â€¢ X â‰¤ Y ?     â”‚    â”‚   â€¢ Amount: B   â”‚
â”‚   â€¢ Active      â”‚    â”‚   â€¢ A â‰¤ B ?     â”‚    â”‚   â€¢ Active      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼ (If Match Found)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Token         â”‚    â”‚   Trade         â”‚    â”‚   Payment       â”‚
â”‚   Transfer      â”‚â”€â”€â”€â–¶â”‚   Execution     â”‚â—€â”€â”€â”€â”‚   Transfer      â”‚
â”‚   â€¢ Escrowâ†’     â”‚    â”‚   â€¢ Amount: Z   â”‚    â”‚   â€¢ Escrowâ†’     â”‚
â”‚     Buyer       â”‚    â”‚   â€¢ Price: X    â”‚    â”‚     Seller      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Orders        â”‚    â”‚   Trade         â”‚    â”‚   Portfolios    â”‚
â”‚   Updated       â”‚â”€â”€â”€â–¶â”‚   Record        â”‚â—€â”€â”€â”€â”‚   Updated       â”‚
â”‚   â€¢ Remaining-- â”‚    â”‚   Created       â”‚    â”‚   â€¢ Balances    â”‚
â”‚   â€¢ Status      â”‚    â”‚   â€¢ Permanent   â”‚    â”‚     adjusted    â”‚
â”‚     updated     â”‚    â”‚     record      â”‚    â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ 4. Complete User Journey

### New Company Journey
```
1. ğŸ¢ Register Company
   â”‚
   â”œâ”€â–¶ 2. ğŸ’° Create Token Offering
   â”‚   â”‚
   â”‚   â”œâ”€â–¶ 3. ğŸ‘¥ Users Participate (ITO)
   â”‚   â”‚   â”‚
   â”‚   â”‚   â””â”€â–¶ 4. ğŸ“ˆ Secondary Trading Begins
   â”‚   â”‚
   â”‚   â””â”€â–¶ Wait for offering period
   â”‚
   â””â”€â–¶ Wait for admin verification
```

### User Trading Journey
```
1. ğŸ’° Participate in ITO
   â”‚
   â”œâ”€â–¶ 2. ğŸ“Š Receive Tokens
   â”‚   â”‚
   â”‚   â”œâ”€â–¶ 3a. ğŸ“¤ Place Sell Order
   â”‚   â”‚    â”‚
   â”‚   â”‚    â””â”€â–¶ 4a. ğŸ¤ Execute Trade (when matched)
   â”‚   â”‚
   â”‚   â””â”€â–¶ 3b. ğŸ’° Hold Tokens
   â”‚        â”‚
   â”‚        â””â”€â–¶ 4b. ğŸ“ˆ Monitor Portfolio
   â”‚
   â””â”€â–¶ OR: ğŸ’¸ Buy from Secondary Market
       â”‚
       â”œâ”€â–¶ ğŸ“¥ Place Buy Order
       â”‚
       â””â”€â–¶ ğŸ¤ Execute Trade (when matched)
```

---

## ğŸ”„ 5. Account State Transitions

### Order Status Flow
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PENDING   â”‚â”€â”€â”€â–¶â”‚   ACTIVE    â”‚â”€â”€â”€â–¶â”‚   FILLED    â”‚
â”‚   (Created) â”‚    â”‚ (In market) â”‚    â”‚ (Complete)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   â”‚
       â”‚                   â–¼                   â”‚
       â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
       â”‚            â”‚  CANCELLED  â”‚            â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ (Withdrawn) â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Offering Status Flow
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PENDING   â”‚â”€â”€â”€â–¶â”‚   ACTIVE    â”‚â”€â”€â”€â–¶â”‚  COMPLETED  â”‚
â”‚ (Not started)â”‚    â”‚(During period)â”‚  â”‚(Successful) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   
       â”‚                   â–¼                   
       â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            
       â”‚            â”‚   EXPIRED   â”‚            
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  (Failed)   â”‚            
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            
```

---

## ğŸ“Š 6. Data Flow Summary

### Key Data Relationships
```
Platform
â”œâ”€â”€ Companies (1:N)
â”‚   â”œâ”€â”€ Token Mint (1:1)
â”‚   â”œâ”€â”€ Token Offerings (1:N)
â”‚   â””â”€â”€ Orders (1:N)
â”œâ”€â”€ Users (1:N)
â”‚   â”œâ”€â”€ Portfolios (1:N per company)
â”‚   â”œâ”€â”€ Orders (1:N)
â”‚   â””â”€â”€ Trade History (1:N)
â””â”€â”€ Trades (1:N)
    â”œâ”€â”€ Buy Order (N:1)
    â”œâ”€â”€ Sell Order (N:1)
    â””â”€â”€ Participants (2 users)
```

### Event Emission Flow
```
Action â”€â”€â”€â–¶ Smart Contract â”€â”€â”€â–¶ Event Emitted â”€â”€â”€â–¶ Frontend Update
  â”‚              â”‚                    â”‚                    â”‚
  â”‚              â”‚                    â”‚                    â–¼
  â”‚              â”‚                    â”‚             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚              â”‚                    â”‚             â”‚   User      â”‚
  â”‚              â”‚                    â”‚             â”‚   Interface â”‚
  â”‚              â”‚                    â”‚             â”‚   Updates   â”‚
  â”‚              â”‚                    â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚              â”‚                    â”‚
  â”‚              â”‚                    â–¼
  â”‚              â”‚             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚              â”‚             â”‚   Indexer   â”‚
  â”‚              â”‚             â”‚   Services  â”‚
  â”‚              â”‚             â”‚   (Optional)â”‚
  â”‚              â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚              â”‚
  â”‚              â–¼
  â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚       â”‚   Account   â”‚
  â”‚       â”‚   State     â”‚
  â”‚       â”‚   Updates   â”‚
  â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Chain     â”‚
â”‚   State     â”‚
â”‚   Updated   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

This visual representation shows how your DeFi platform orchestrates complex financial operations through smart contracts, ensuring security, transparency, and efficiency at every step! ğŸš€